<app-info-box *ngIf="showShiftToCreate" heading="Översikt" subtext="Kontrollera arbetspassets information och godkänn"></app-info-box>
<app-info-box *ngIf="showShiftsByMonth" heading="Arbetstimmar - Översikt"></app-info-box>

<div *ngIf="showShiftToCreate">

  <table class="table">
    <thead class="table-head">
      <tr>
        <th>Arbetsuppgift</th>
        <th>Datum</th>
        <th>Tid</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          {{shiftToAdd.taskName}}
          <div class="mt-3">
            <a *ngIf="shiftToAdd.shiftType == 'subtask'" routerLink="/user/shift/subtasks/{{taskId}}/datetime">Ändra tid & datum</a>
            <a *ngIf="shiftToAdd.shiftType == 'assignment'" routerLink="/user/shift/assignments/{{taskId}}/datetime">Ändra tid & datum</a>
          </div>
        </td>
        <td>
          {{shiftToAdd.startTime | date:'d MMMM, y'}}
          <div class="mt-3">
            <a *ngIf="shiftToAdd.shiftType == 'subtask'" routerLink="/user/shift/subtasks" (click)="onUpdate()">Ändra uppgift</a>
            <a *ngIf="shiftToAdd.shiftType == 'assignment'" routerLink="/user/shift/assignments" (click)="onUpdate()">Ändra uppgift</a>
          </div>
        </td>
        <td>{{shiftToAdd.startTime | date:'HH:mm'}} - {{shiftToAdd.endTime | date:'HH:mm'}}</td>
      </tr>
    </tbody>
  </table>  
  <div class="row justify-content-end">
      <button class="btn-primary"(click)="onSubmitShift()">Lägg till arbetspass</button>
  </div>
</div>

<div *ngIf="showShiftsByMonth">
  <form (ngSubmit)="onDateSubmit(form)" #form="ngForm">
    <div class="row">
        <div class="col-md-2">
            <label for="byYear">År</label>
            <select class="input" name="byYear" id="byYear" [ngModel]="currentYear" required>
              <option *ngFor="let year of optionYears" [ngValue]="year">{{year}}</option>
            </select>
        </div>
        <div class="col-md-2">
            <label for="byMonth">Månad</label>
            <select class="input" name="byMonth" id="byMonth" [ngModel]="currentMonth" required>
                <option *ngFor="let month of optionMonths" [ngValue]="month.value">{{month.label}}</option>
            </select>
        </div>
        <div class="correct-label-margin">
          <button class="btn-primary" type="submit">Hämta timmar</button>
        </div>
    </div>
  </form>

  <table class="table">
    <thead class="table-head">
      <tr>
        <th>Arbetsuppgift</th>
        <th>Datum</th>
        <th>Tid</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let shift of shifts">
        <td>{{shift.taskName }}</td>
        <td>{{shift.startTime | date:'d MMMM, y'}}</td>
        <td>{{shift.startTime | date:'HH:mm'}} - {{shift.endTime | date:'HH:mm'}}</td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="shifts && shifts.length == 0">Inga skift att hämta för denna månad</p>

</div>
